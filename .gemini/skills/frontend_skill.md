# Frontend Skill Checklist & Best Practices (Senior Level)

프론트엔드(Next.js, React) 관련 요청을 처리할 때 준수해야 할 **최우선 기술 지점(Source of Truth)**입니다. 본 문서는 프로젝트의 모든 구현 기준이 되며, 코드와 지침이 충돌할 경우 본 문서의 원칙을 우선하여 검토합니다.

## 1. 프로젝트 고유 아키텍처 및 에셋 핸들링
- **Asset Proxying (Next.js Rewrites)**: 
    - 백엔드 스토리지 에셋 접근 시 `next.config.ts`의 `rewrites` 설정을 통해 프론트엔드 도메인에서 상대 경로(`/storage/...`)로 접근하여 CORS 이슈를 방지하고 환경 간 일관성을 유지합니다.
- **AI 멀티모달 플랫폼 UX**: 
    - **지연 시간 보상**: `useFakeProgress`를 활용하여 생성 중인 작업의 체감 대기 시간을 관리합니다.
    - **실시간 무결성**: SSE 수신 시 서버 타임스탬프(`updated_at`)를 확인하여 로컬 데이터 역행을 방지합니다.
- **할당량 및 상태 동기화**: `QuotaManager`와 `TaskManager`를 통해 시스템 리소스 및 작업 상태를 전역적으로 동기화합니다.

## 2. 시니어급 렌더링 및 성능 최적화
- **Hydration 무결성**: 
    - `Zustand`의 `persist` 사용 시 서버/클라이언트 데이터 불일치를 막기 위해 하이드레이션 완료 여부(`_hasHydrated`)를 확인한 후 UI를 노출하거나 업데이트합니다.
- **Web Vitals (LCP/CLS)**: 
    - **LCP**: 주요 에셋에는 `priority` 속성을 사용하며, 개발 환경의 사격 주소 문제를 해결하기 위해 필요시 `unoptimized` 설정을 신중하게 관리합니다.
    - **CLS**: 스켈레톤 UI 및 고정 종횡비를 통해 레이아웃 이동을 0으로 유지합니다.
- **가상화 리스트**: Masonry Grid 등 대용량 데이터 렌더링 시 가상화 기법을 사용하여 렌더링 성능을 확보합니다.

## 3. 선언적 상태 관리 및 복원력
- **관심사 분리**: 
    - `TanStack Query`는 서버 데이터의 캐싱 및 동기화에, `Zustand`는 사용자 인터랙션 및 세션 유지 상태에 집중합니다.
- **연결 및 리소스 회복력**: 
    - 페이지 이탈 시 `AbortController`로 API 요청을 중단하고, `useEffect` 내의 모든 리소스(Timer, Listener)를 철저히 Clean-up 하여 메모리 누수를 방지합니다.
- **SSE & Polling Hybrid**: SSE 연결 장애 시 TaskManager의 백업 폴링과 탭 포커스 동기화를 통해 항상 최신 상태를 유지합니다.

## 4. 보안 및 품질 가이드라인
- **보안 (Security at Edge)**: 
    - `NEXT_PUBLIC_` 변수의 최소 사용을 지향하며, 민감 로직은 RSC나 Route Handler에서 처리합니다.
    - AI 생성 텍스트 등 외부 유입 데이터를 렌더링할 때는 반드시 `Sanitization` 처리를 거칩니다.
- **선언적 에러 처리**: `error.tsx`와 Error Boundary를 통해 장애를 격리하고 직관적인 복구 경로를 제공합니다.
- **테스트 및 검증**: 핵심 훅과 스토어 로직은 `Vitest`로 검증하며, UI 변경 시 브라우저 개발자 도구의 성능 프로파일링을 필수적으로 수행합니다.

## 5. 지침의 권위 및 준수 원칙
- 본 매뉴얼은 프로젝트의 **'코드 헌법'** 역할을 수행합니다.
- 새로운 기능 구현 시 본 지침과의 정합성을 최우선으로 검토하며, 의도적인 예외 상황 발생 시에는 그 타당성을 엄격히 따집니다.
- 지침은 코드의 현상에 따라 수동적으로 수정되는 것이 아니라, 프로젝트가 지향해야 할 기술적 표준으로서의 가치를 유지합니다.
